@model MTSINHR.Models.Message

@{
    Layout = "~/Views/Shared/Layout_New.cshtml";
}

@System.Web.Optimization.Scripts.Render("~/bundles/jquery")
@System.Web.Optimization.Scripts.Render("~/bundles/bootstrap")


<style>
    .carousel-inner img {
        width: 100%;
        height: 350px;
    }
</style>


<html>
<body>
    <div class="text-center">
        <h4 style="color: chocolate;">Messages</h4>
    </div>
    
    <br />
    <div id="carousel-example" class="carousel slide" data-ride="carousel">
        <ul class="carousel-indicators">
        </ul>
        <div class="carousel-inner">
        </div>
        <a class="carousel-control-prev" href="#carousel-example" data-slide="prev">
            <span class="carousel-control-prev-icon"></span>
        </a>
        <a class="carousel-control-next" href="#carousel-example" data-slide="next">
            <span class="carousel-control-next-icon"></span>
        </a>
    </div>

    <div class="form-signin" style="display:none">
     <div class="card " >
           <div class="card-header text-center ">
         Messages
        </div>
        <div class="card-body">
            <h6 class="text-center" style="color: chocolate">No Posts Yet</h6>
            </div>
         </div>
        
    </div>
</body>
</html>

<script>
    $(document).ready(function () {

        $.ajax({
            type: "GET",
            url: '@Url.Content("~/Messages/GetMessages")',
            async:false,
            success: function (data) {
                    var len = JSON.parse(data);
                    if (len.length > 0) {
                        $(".form-signin").hide();
                        for (var i = 0; i < len.length; i++) {

                            var str = '<div class="carousel-item"><img src=@Url.Content("~/Images/slider1.jpg") alt="Slider" class="img-fluid"><div class="carousel-caption"><h2 class="headtitle">' + len[i].MessageHeader + '</h2> <h4 class="messagetitle"> ' + len[i].MessageTitle + ' </h4> <p class="messageparagraph">' + len[i].Message + '</p> </div></div>'

                            $(str).appendTo(".carousel-inner");

                            $('<li data-target="#carousel-example" data-slide-to="' + len[i] + '"></li>').appendTo('.carousel-indicators')

                        }
                    
                    $('.carousel-item').first().addClass('active');
                    $('.carousel-indicators > li').first().addClass('active');
                    $('#carousel-example').carousel();


                }
                else {
                    $(".form-signin").show();
                }
            }
        });

        $.ajax({
            type: "GET",
            url: '@Url.Content("~/Messages/GetBirthDays")',
            success: function (data) {
                var len = JSON.parse(data);
                if (len.length > 0) {
                    $(".form-signin").hide();
                    for (var i = 0; i < len.length; i++) {

                        var str = '<div class="carousel-item"><img src=@Url.Content("~/Images/birthday.jpg") alt="Slider" class="img-fluid"><div class="carousel-caption"><h2 class="headtitle">' + "Birthday Wishes" + '</h2> <h4 class="messagetitle"> ' + "Wish You Many More Happy Returns Of The Day " + len[i].Name + ' </h4> <p class="messageparagraph">' + "Hope You Have The Greatest Birthday Ever!" + '</p> </div></div>'

                        $(str).appendTo(".carousel-inner");

                        $('<li data-target="#carousel-example" data-slide-to="' + len[i] + '"></li>').appendTo('.carousel-indicators')

                    }

                    $('.carousel-item').first().addClass('active');
                    $('.carousel-indicators > li').first().addClass('active');
                    $('#carousel-example').carousel();
                }
                else {
                    $(".form-signin").show();
                }
            }
        });
    });
</script>
